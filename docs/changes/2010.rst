2010
====

20100102
--------

- small changes in :srcref:`dlm/dls/dlsprj1.rep`: the user can now 
  specify new options "show weekly sums", "show monthly sums" and "show detail per day".
  
20100105
--------

- Weiter an http://code.google.com/p/tim/wiki/Vat2010


20100116
--------
- ParSetUsers() wies u.U. einen T2 zu, auch wenn dessen USRATTR_H gesetzt war.
  
20100121
--------
- val2csv() kennt jetzt auch den Type GTYPE_LOGICAL. Bei Sh-F7 auf einer Tabelle, die ein Feld mit Typ L enthält, kam bisher ein Laufzeitfehler.

20100128
--------

- DEF_KITZ. Neue Tabelle ZGR (Zielgruppen)

20100202
--------

- DEF_IMP : Neue Funktion ImpPickFiles() wird mit alt-B auf IMP, IML und MVI aufgerufen.


20100303
--------

In VATLIST.XML holte TIM an einigen Stellen das Landeskürzel aus der MWSt-Nummer raus, was ab Version 1.3 obligatorisch ist.

20100303b
---------

Korrektur: nur beim Deklaranten, nicht bei den Kunden, muss das "BE" in der Nummer bleiben (SP01APPL - L:55-C:30 - Xml-Fehler: cvc-pattern-valid: Value 'BE0464117185' is not facet-valid with respect to pattern '\d{10}' for type '#AnonType_VATNumCompanyInfoClient'.)


20100303c
---------

Korrektur: auch nicht beim Deklaranten, sondern nur beim "Representing Agent" musste das BE davor bleiben.

20100311
--------

DLM\STD\PROG.MNU ruft Druck- und Verwaltermenü jetzt mit lActive = .t. auf. Sonst kriegen Benutzer, die fürs Hauptmenü noch eine alte MNU.DBC haben, die alte (nicht mehr unterstützte) Version dieser Menüs.


20100325
--------

- CopyRight() zeigt jetzt auch endlich mal 2010 an...


20100420
--------

- ImpAuto() meldete Fehler während DocCreate() (u.a. z.B. "Periode nicht definiert" nicht). Behoben.

20100426
--------
- Neue Funktion ParCleanup() löscht einen Partner und alle verknüpften Daten. 
  Wird benutzt für Aktenlöschliste. Das ist ein Report, der während des 
  Ausdruckens löscht (wenn die entsprechende Option angekreuzt und bestätigt wurde).
  
  TODO: PARCLEAN.LOG erstellen, die manuell gelöscht werden muss, um den nächsten 
  Löschvorgang freizugeben.
  
- Neuer Eintrag `CSVFile` in .REP-Dateien. Bisher hieß die erzeugte CSV-Datei immer TMP.CSV. Jetzt kann man sie im Report explizit benennen.

- Neue Funktion RptLineCount() gibt die Gesamtzahl der gedruckten Detail-Zeilen zurück.


20100514
--------
   
 - Neues #define DEF_TIM2LINO definiert neuen Eintrag `DoChangeLog` in
   der TIM.DBI. Zum Beispiel::

     DoChangeLog {|cAlias|cAlias $ "PAR PXT"}

   Das bewirkt, dass für PAR und PXT jede einzelne Änderung in eine
   Datei changelog.json geschrieben wird, die im Datenbankverzeichnis
   steht. Diese Datei wird dann von Lino tim2lino.py eingelesen, der
   die verarbeiteten Zeilen nach changelog.done.json schreibt.
   Neue Funktion val2json(). 
   
   
20100518
--------
  - changelog.json wird nun nach CPAS\changelog statt nach CPAS 
    geschrieben.
  - Wenn mindestens ein Feld bearbeitet wurde, dann werden nun dennoch 
    alle Datenfelder in den changelog-Eintrag gesetzt. Denn nur so ist 
    eine sinnvolle Datenreparatur möglich im (theoretisch unmöglichen) 
    Fall, dass changelog-Einträge verloren gehen.

20100524
--------
- utos() vertrug bisher keine Gänsefüßchen ('"'). Jetzt wohl.